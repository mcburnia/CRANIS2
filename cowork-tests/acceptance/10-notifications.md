# Test: Notifications — View, Mark as Read, Unread Count

**Priority:** medium
**Preconditions:** User is logged in. The user has at least one unread notification in the system (generated by system events such as vulnerability scans, CRA deadlines, billing events, or escrow deposits).
**Test User:** testadmin@manufacturer-active.test / TestPass123!
**URL:** https://dev.cranis2.dev/login

## Steps

### Step 1 — Login
**Action:** Enter email `testadmin@manufacturer-active.test` and password `TestPass123!`. Click "Sign In".
**Expected:** User is redirected to the dashboard. A notification indicator (bell icon or badge) is visible in the header/navbar area.

### Step 2 — Check Unread Notification Count
**Action:** Observe the notification indicator in the header.
**Expected:** The notification badge displays a count of unread notifications. The count is a positive integer if there are unread notifications, or no badge/zero if all are read.

### Step 3 — Open Notifications
**Action:** Click the notification bell icon or navigate to the notifications page.
**Expected:** The notifications list or dropdown opens showing:
- Individual notification items
- Each notification has a title/message, timestamp, and severity indicator
- Severity uses correct values: critical, high, medium, low, or info (not "warning")
- Unread notifications are visually distinct from read ones (e.g. bold, highlighted, dot indicator)

### Step 4 — Review Notification Content
**Action:** Read the content of the most recent notification.
**Expected:** The notification contains:
- A descriptive message about the event
- A timestamp showing when the notification was created
- A severity level with appropriate colour (red for critical, amber for high, etc.)
- Optionally a link to the related resource (product, report, etc.)

### Step 5 — Note the Current Unread Count
**Action:** Record the current unread notification count shown in the badge.
**Expected:** The count is noted (e.g. "3 unread").

### Step 6 — Mark a Notification as Read
**Action:** Click on an unread notification or use a "Mark as Read" button/action on a specific notification.
**Expected:** The notification's visual state changes from unread to read (e.g. no longer bold, background changes, dot disappears).

### Step 7 — Verify Unread Count Decrements
**Action:** Check the notification badge count after marking one notification as read.
**Expected:** The unread count has decreased by 1 from the count noted in Step 5. For example, if it was 3, it should now show 2.

### Step 8 — Mark Another Notification as Read
**Action:** Mark a second unread notification as read.
**Expected:** The notification state changes and the unread count decrements by 1 again.

### Step 9 — Verify Count Consistency After Reload
**Action:** Refresh the browser page.
**Expected:** The unread count matches the count after Step 8 (i.e. the read status persisted). Previously read notifications remain in the read state.

### Step 10 — Mark All as Read (if available)
**Action:** If a "Mark All as Read" button is available, click it.
**Expected:** All notifications change to read state. The unread badge disappears or shows 0. No notifications remain in the unread visual state.

## Pass Criteria
- [ ] Notification indicator is visible in the header
- [ ] Unread count displays correctly
- [ ] Notifications list shows items with message, timestamp, and severity
- [ ] Severity values are correct (critical/high/medium/low/info, not "warning")
- [ ] Unread and read notifications are visually distinct
- [ ] Marking a notification as read changes its visual state
- [ ] Unread count decrements correctly when notifications are marked as read
- [ ] Read state persists after page reload

## Result
**Status:** _pending_
**Notes:**
